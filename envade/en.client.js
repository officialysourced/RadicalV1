(()=>{var e={287:function(){let e=new URL(self.scope$location.origin);function t(e,t){return e.replace(/(url\(['"]?)(.*?)(['"]?\))/gi,(e,r,n,a)=>{if(n.startsWith("#")||n.startsWith("data:"))return e;let s=self.__envade$rewrite.url.rewriteUrl(n,t);return`${r}${s}${a}`})}let r={src:[HTMLScriptElement,HTMLMediaElement,HTMLImageElement,HTMLIFrameElement,HTMLSourceElement,HTMLAudioElement,HTMLVideoElement,HTMLEmbedElement,HTMLFrameElement],href:[HTMLAnchorElement,HTMLLinkElement,SVGUseElement,SVGImageElement,HTMLAreaElement,HTMLBaseElement,SVGAElement,SVGScriptElement],data:[HTMLObjectElement],action:[HTMLFormElement],formaction:[HTMLButtonElement,HTMLInputElement],srcdoc:[HTMLIFrameElement],srcset:[HTMLImageElement,HTMLSourceElement],poster:[HTMLVideoElement],imagesrcset:[HTMLLinkElement],manifest:[HTMLHtmlElement],background:[HTMLBodyElement,HTMLTableElement,HTMLTableCellElement],cite:[HTMLQuoteElement],longdesc:[HTMLImageElement,HTMLFrameElement,HTMLIFrameElement],usemap:[HTMLImageElement,HTMLInputElement,HTMLObjectElement],profile:[HTMLHeadElement],ping:[HTMLAnchorElement,HTMLAreaElement],"xml:base":[Element,SVGElement],base:[Element,SVGElement],fill:[SVGElement],stroke:[SVGElement],filter:[SVGElement],mask:[SVGElement],"clip-path":[SVGElement],cursor:[SVGElement],"marker-start":[SVGElement],"marker-mid":[SVGElement],"marker-end":[SVGElement],"color-profile":[SVGElement]},n=new Set(["nonce","integrity","csp"]);for(let[n,a]of Object.entries(r)){let r=n.toLowerCase();for(let n of a){let a=Object.getOwnPropertyDescriptor(n.prototype,r);a&&a.get&&a.set&&Object.defineProperty(n.prototype,r,{get(){let e=a.get.call(this);if("string"==typeof e){if("href"===r&&(this instanceof SVGAElement||this instanceof SVGImageElement||this instanceof SVGUseElement||this instanceof SVGScriptElement)&&e.startsWith("#"))return e;if(["fill","stroke","filter","mask","clip-path","cursor","marker-start","marker-mid","marker-end","color-profile"].includes(r))return e.startsWith("url(")&&e.includes("#")&&e.substring(e.indexOf("(")+1,e.lastIndexOf(")")).replace(/['"]/g,"").startsWith("#")?e:e.startsWith("url(")||e.startsWith('url("')||e.startsWith("url('")?self.__envade$rewrite.url.unwriteUrl(e):e;return e.startsWith("data:"),self.__envade$rewrite.url.unwriteUrl(e)}return e},set(n){let s=n;"string"==typeof n&&("href"===r&&(this instanceof SVGAElement||this instanceof SVGImageElement||this instanceof SVGUseElement||this instanceof SVGScriptElement)?s=n.startsWith("#")?n:self.__envade$rewrite.url.rewriteUrl(n,e):["fill","stroke","filter","mask","clip-path","cursor","marker-start","marker-mid","marker-end","color-profile"].includes(r)?s=n.startsWith("url(")?n.substring(n.indexOf("(")+1,n.lastIndexOf(")")).replace(/['"]/g,"").startsWith("#")?n:t(n,e):n:(n.startsWith("data:"),s=self.__envade$rewrite.url.rewriteUrl(n,e))),a.set.call(this,s)},configurable:!0,enumerable:!0})}}let a=Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML");Object.defineProperty(Element.prototype,"innerHTML",{set(n){let s=new DOMParser().parseFromString(n,"text/html");return s.querySelectorAll("*").forEach(n=>{for(let a of(n instanceof HTMLScriptElement&&n.textContent?n.textContent=self.__envade$rewrite.javascript(n.textContent,e):n instanceof HTMLStyleElement&&n.textContent&&(n.textContent=t(self.__envade$rewrite.css(n.textContent,e),e)),n.getAttributeNames())){let s=n.getAttribute(a);if(!s)continue;let i=a.toLowerCase();if((n instanceof HTMLAnchorElement||n instanceof HTMLSpanElement)&&"target"===i){"_self"!==s.toLowerCase()&&n.setAttribute(a,"_self");continue}"href"===i&&(n instanceof SVGAElement||n instanceof SVGImageElement||n instanceof SVGUseElement||n instanceof SVGScriptElement)?(s.startsWith("#")||(s=self.__envade$rewrite.url.rewriteUrl(s,e)),n.setAttribute(a,s)):["fill","stroke","filter","mask","clip-path","cursor","marker-start","marker-mid","marker-end","color-profile"].includes(i)?s.startsWith("url(")?s.substring(s.indexOf("(")+1,s.lastIndexOf(")")).replace(/['"]/g,"").startsWith("#")?n.setAttribute(a,s):n.setAttribute(a,t(s,e)):n.setAttribute(a,s):r[i]?(s.startsWith("data:"),s=self.__envade$rewrite.url.rewriteUrl(s,e),n.setAttribute(a,s)):"style"===i?n.setAttribute(a,t(self.__envade$rewrite.css(s,e),e)):i.includes("srcset")?n.setAttribute(a,self.__envade$rewrite.srcset(s,e)):"enctype"===i&&s.toLowerCase().includes("script")?n.setAttribute(a,"application/x-www-form-urlencoded"):"method"===i&&s.toLowerCase()}}),n=s.body.innerHTML,a.set.call(this,n)},configurable:!0,enumerable:!0});let s=Object.getOwnPropertyDescriptor(Element.prototype,"outerHTML");Object.defineProperty(Element.prototype,"outerHTML",{set(n){let a=new DOMParser().parseFromString(n,"text/html");return a.querySelectorAll("*").forEach(n=>{for(let a of(n instanceof HTMLScriptElement&&n.textContent?n.textContent=self.__envade$rewrite.javascript(n.textContent,e):n instanceof HTMLStyleElement&&n.textContent&&(n.textContent=t(self.__envade$rewrite.css(n.textContent,e),e)),n.getAttributeNames())){let s=n.getAttribute(a);if(!s)continue;let i=a.toLowerCase();if((n instanceof HTMLAnchorElement||n instanceof HTMLSpanElement)&&"target"===i){"_self"!==s.toLowerCase()&&n.setAttribute(a,"_self");continue}"href"===i&&(n instanceof SVGAElement||n instanceof SVGImageElement||n instanceof SVGUseElement||n instanceof SVGScriptElement)?(s.startsWith("#")||(s=self.__envade$rewrite.url.rewriteUrl(s,e)),n.setAttribute(a,s)):["fill","stroke","filter","mask","clip-path","cursor","marker-start","marker-mid","marker-end","color-profile"].includes(i)?s.startsWith("url(")?s.substring(s.indexOf("(")+1,s.lastIndexOf(")")).replace(/['"]/g,"").startsWith("#")?n.setAttribute(a,s):n.setAttribute(a,t(s,e)):n.setAttribute(a,s):r[i]?(s.startsWith("data:"),s=self.__envade$rewrite.url.rewriteUrl(s,e),n.setAttribute(a,s)):"style"===i?n.setAttribute(a,t(self.__envade$rewrite.css(s,e),e)):i.includes("srcset")?n.setAttribute(a,self.__envade$rewrite.srcset(s,e)):"enctype"===i&&s.toLowerCase().includes("script")?n.setAttribute(a,"application/x-www-form-urlencoded"):"method"===i&&s.toLowerCase()}}),n=a.body.innerHTML,s.set.call(this,n)},configurable:!0,enumerable:!0});let i=Object.getOwnPropertyDescriptor(Node.prototype,"textContent");Object.defineProperty(Node.prototype,"textContent",{set(r){return this instanceof HTMLScriptElement&&"string"==typeof r?r=self.__envade$rewrite.javascript(r,e):this instanceof HTMLStyleElement&&"string"==typeof r&&(r=t(self.__envade$rewrite.css(r,e),e)),i.set.call(this,r)},configurable:!0,enumerable:!0});let l=Object.getOwnPropertyDescriptor(HTMLImageElement.prototype,"srcset");Object.defineProperty(HTMLImageElement.prototype,"srcset",{get(){return l.get.call(this)},set(t){t=self.__envade$rewrite.srcset(t,e),l.set.call(this,t)},configurable:!0,enumerable:!0}),Element.prototype.getAttribute=new Proxy(Element.prototype.getAttribute,{apply(e,t,a){let[s]=a;if(n.has(s.toLowerCase()))return null;let i=Reflect.apply(e,t,a);if("string"==typeof i){let e=s.toLowerCase();if("href"===e&&(t instanceof SVGAElement||t instanceof SVGImageElement||t instanceof SVGUseElement||t instanceof SVGScriptElement)&&i.startsWith("#"))return i;if(r[e]){if(["fill","stroke","filter","mask","clip-path","cursor","marker-start","marker-mid","marker-end","color-profile"].includes(e))return i.startsWith("url(")&&i.includes("#")&&i.substring(i.indexOf("(")+1,i.lastIndexOf(")")).replace(/['"]/g,"").startsWith("#")?i:i.startsWith("url(")||i.startsWith('url("')||i.startsWith("url('")?self.__envade$rewrite.url.unwriteUrl(i):i;return i.startsWith("data:"),self.__envade$rewrite.url.unwriteUrl(i)}}return i}}),Element.prototype.setAttribute=new Proxy(Element.prototype.setAttribute,{apply(a,s,i){let[l,o]=i,d=l.toLowerCase();return n.has(d)?o="":((s instanceof HTMLAnchorElement||s instanceof HTMLSpanElement)&&"target"===d?"_self"!==o.toLowerCase()&&(o="_self"):"href"===d&&(s instanceof SVGAElement||s instanceof SVGImageElement||s instanceof SVGUseElement||s instanceof SVGScriptElement)?o.startsWith("#")||(o=self.__envade$rewrite.url.rewriteUrl(o,e)):["fill","stroke","filter","mask","clip-path","cursor","marker-start","marker-mid","marker-end","color-profile"].includes(d)?o.startsWith("url(")&&(o.substring(o.indexOf("(")+1,o.lastIndexOf(")")).replace(/['"]/g,"").startsWith("#")||(o=t(o,e))):r[d]&&(o.startsWith("data:"),o=self.__envade$rewrite.url.rewriteUrl(o,e)),"style"===d&&(o=t(self.__envade$rewrite.css(o,e),e)),d.includes("srcset")&&(o=self.__envade$rewrite.srcset(o,e)),"enctype"===d&&o.toLowerCase().includes("script")&&(o="application/x-www-form-urlencoded")),Reflect.apply(a,s,[l,o])}});let o=Element.prototype.getAttributeNS;Element.prototype.getAttributeNS=new Proxy(o,{apply(e,t,a){let[s,i]=a;if(null===s&&n.has(i.toLowerCase()))return null;if("http://www.w3.org/1999/xlink"===s&&"href"===i){let r=Reflect.apply(e,t,a);return"string"==typeof r?r.startsWith("data:")?self.__envade$rewrite.url.unwriteUrl(r):r.startsWith("#")?r:self.__envade$rewrite.url.unwriteUrl(r):r}if(r[i.toLowerCase()]){let r=Reflect.apply(e,t,a);if("string"==typeof r){if(["fill","stroke","filter","mask","clip-path","cursor","marker-start","marker-mid","marker-end","color-profile"].includes(i.toLowerCase()))return r.startsWith("url(")&&r.includes("#")&&r.substring(r.indexOf("(")+1,r.lastIndexOf(")")).replace(/['"]/g,"").startsWith("#")?r:r.startsWith("url(")||r.startsWith('url("')||r.startsWith("url('")?self.__envade$rewrite.url.unwriteUrl(r):r;return r.startsWith("data:"),self.__envade$rewrite.url.unwriteUrl(r)}return r}return Reflect.apply(e,t,a)}});let d=Element.prototype.setAttributeNS;function h(n){if(!(n instanceof Element))return n;for(let a of(n instanceof HTMLScriptElement&&n.textContent?n.textContent=self.__envade$rewrite.javascript(n.textContent,e):n instanceof HTMLStyleElement&&n.textContent&&(n.textContent=t(self.__envade$rewrite.css(n.textContent,e),e)),n.getAttributeNames())){let s=n.getAttribute(a);if(!s)continue;let i=a.toLowerCase();if((n instanceof HTMLAnchorElement||n instanceof HTMLSpanElement)&&"target"===i){"_self"!==s.toLowerCase()&&n.setAttribute(a,"_self");continue}"href"===i&&(n instanceof SVGAElement||n instanceof SVGImageElement||n instanceof SVGUseElement||n instanceof SVGScriptElement)?(s.startsWith("#")||(s=self.__envade$rewrite.url.rewriteUrl(s,e)),n.setAttribute(a,s)):["fill","stroke","filter","mask","clip-path","cursor","marker-start","marker-mid","marker-end","color-profile"].includes(i)?(s.startsWith("url(")&&(s.substring(s.indexOf("(")+1,s.lastIndexOf(")")).replace(/['"]/g,"").startsWith("#")||(s=t(s,e))),n.setAttribute(a,s)):r[i]?(s.startsWith("data:"),s=self.__envade$rewrite.url.rewriteUrl(s,e),n.setAttribute(a,s)):"style"===i?n.setAttribute(a,t(self.__envade$rewrite.css(s,e),e)):i.includes("srcset")?n.setAttribute(a,self.__envade$rewrite.srcset(s,e)):"enctype"===i&&s.toLowerCase().includes("script")&&n.setAttribute(a,"application/x-www-form-urlencoded")}return n}Element.prototype.setAttributeNS=new Proxy(d,{apply(a,s,i){let[l,o,d]=i,h=o.toLowerCase();return null===l&&n.has(h)?d="":((s instanceof HTMLAnchorElement||s instanceof HTMLSpanElement)&&"target"===h?"_self"!==d.toLowerCase()&&(d="_self"):"http://www.w3.org/1999/xlink"===l&&"href"===o?d.startsWith("#")||(d.startsWith("data:"),d=self.__envade$rewrite.url.rewriteUrl(d,e)):["fill","stroke","filter","mask","clip-path","cursor","marker-start","marker-mid","marker-end","color-profile"].includes(h)?d.startsWith("url(")&&(d.substring(d.indexOf("(")+1,d.lastIndexOf(")")).replace(/['"]/g,"").startsWith("#")||(d=t(d,e))):r[h]&&(d.startsWith("data:"),d=self.__envade$rewrite.url.rewriteUrl(d,e)),"style"===h&&(d=t(self.__envade$rewrite.css(d,e),e)),h.includes("srcset")&&(d=self.__envade$rewrite.srcset(d,e)),"enctype"===h&&d.toLowerCase().includes("script")&&(d="application/x-www-form-urlencoded")),Reflect.apply(a,s,[l,o,d])}});let c=Node.prototype.appendChild;Node.prototype.appendChild=function(e){return c.call(this,h(e))};let f=Node.prototype.insertBefore;Node.prototype.insertBefore=function(e,t){return f.call(this,h(e),t)};let u=Node.prototype.replaceChild;Node.prototype.replaceChild=function(e,t){return u.call(this,h(e),t)}},948:function(){new WeakMap;let e=new Map;window.addEventListener=new Proxy(window.addEventListener,{apply(t,r,n){let[a,s,...i]=n;if("function"!=typeof s)return Reflect.apply(t,r,n);e.has(s)||e.set(s,new Map);let l=e.get(s);if(!l.has(a)){let e="message"===a||"messageerror"===a?new Proxy(s,{apply(e,t,r){let[n]=r;if(n&&"object"==typeof n)try{Object.defineProperty(n,"origin",{value:window.scope$location?.origin,writable:!1,configurable:!0})}catch(e){}return Reflect.apply(e,t,r)}}):"hashchange"===a?new Proxy(s,{apply(e,t,r){let[n]=r;if(n&&"object"==typeof n)try{Object.defineProperty(n,"newURL",{value:self.__envade$rewrite?.url?.unwriteUrl?.(n.newURL),writable:!1,configurable:!0}),Object.defineProperty(n,"oldURL",{value:self.__envade$rewrite?.url?.unwriteUrl?.(n.oldURL),writable:!1,configurable:!0})}catch(e){}return Reflect.apply(e,t,r)}}):s;l.set(a,e)}return Reflect.apply(t,r,[a,l.get(a),...i])}}),window.removeEventListener=new Proxy(window.removeEventListener,{apply(t,r,n){let[a,s,...i]=n;if("function"!=typeof s)return Reflect.apply(t,r,n);let l=e.get(s)?.get(a)||s;return Reflect.apply(t,r,[a,l,...i])}}),window.dispatchEvent=new Proxy(window.dispatchEvent,{apply:(e,t,r)=>Reflect.apply(e,t,r)})},988:function(){let e=new Proxy(()=>{},{get:()=>e,apply:()=>e});Object.defineProperty(navigator,"serviceWorker",{get:()=>e,configurable:!0})},933:function(){let e=new Set(["background","background-image","mask","mask-image","list-style","list-style-image","border-image","border-image-source","cursor"]),t=new URL(self.scope$location.origin),r=CSSStyleDeclaration.prototype.setProperty;CSSStyleDeclaration.prototype.setProperty=new Proxy(r,{apply(r,n,a){let[s,i,l]=a;return e.has(s)?Reflect.apply(r,n,[s,self.__envade$rewrite.css(i,t),l]):Reflect.apply(r,n,a)}})}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}(()=>{"use strict";let e,t,n,a,s;function i(){return new URL(self.__envade$config.codec.decode(location.href.slice((location.origin+self.__envade$config.prefix).length)))}let l={get href(){return i().href},set href(url){if(url.startsWith(location.origin)){console.log("Rewriting href (url split)",url=url.slice(location.origin.length)),location.href=self.__envade$rewrite.url.rewriteUrl(url,i().href);return}console.log("Setting href (full url)",url),location.href=self.__envade$rewrite.url.rewriteUrl(url,i().href)},get origin(){return i().origin},get protocol(){return i().protocol},set protocol(_){},get host(){return i().host},set host(value){let e=i();e.host=value,window.location.href=self.__envade$rewrite.url.rewriteUrl(e.toString(),e)},get hostname(){return i().hostname},set hostname(value){let e=i();e.hostname=value,window.location.href=self.__envade$rewrite.url.rewriteUrl(e.toString(),e)},get port(){return i().port},set port(_){},get pathname(){return i().pathname},set pathname(val){let e=i();e.pathname=val,window.location.href=self.__envade$rewrite.url.rewriteUrl(e.toString(),e)},get search(){return i().search},set search(val){let e=i();e.search=val,window.location.href=self.__envade$rewrite.url.rewriteUrl(e.toString(),e)},get hash(){return i().hash},set hash(val){let e=i();e.hash=val,window.location.href=self.__envade$rewrite.url.rewriteUrl(e.toString(),e)},toString:()=>i().toString(),assign(e){location.assign(self.__envade$rewrite.url.rewriteUrl(e,i().href))},replace(e){location.replace(self.__envade$rewrite.url.rewriteUrl(e,i().href))},reload(){location.reload()}};Object.defineProperty(window,"scope$location",{configurable:!0,enumerable:!0,get:()=>l,set(e){}}),Object.defineProperty(globalThis,"scope$location",{configurable:!0,enumerable:!0,get:()=>l,set(e){}}),Object.defineProperty(document,"scope$location",{configurable:!0,enumerable:!0,get:()=>l,set(e){}}),r(287),Object.defineProperty(document,"URL",{get:()=>i().href,configurable:!0}),Object.defineProperty(document,"baseURI",{get:()=>i().href,configurable:!0}),Object.defineProperty(document,"documentURI",{get:()=>i().href,configurable:!0}),r(948),window.eval=new Proxy(window.eval,{apply:(e,t,r)=>(r[0]&&(r[0]=self.__envade$rewrite.javascript(r[0],i())),Reflect.apply(e,t,r))}),window.Function=new Proxy(Function,{construct(e,t){let r=t.length-1;return t[r]&&(t[r]=self.__envade$rewrite.javascript(t[r],i())),Reflect.construct(e,t)}}),window.history.pushState=new Proxy(window.history.pushState,{apply:(e,t,r)=>(r[2]&&(r[2]=self.__envade$rewrite.url.rewriteUrl(r[2],i().href)),Reflect.apply(e,t,r))}),window.history.replaceState=new Proxy(window.history.replaceState,{apply:(e,t,r)=>(r[2]&&(r[2]=self.__envade$rewrite.url.rewriteUrl(r[2],i().href)),Reflect.apply(e,t,r))}),r(933),window.Worker=new Proxy(Worker,{construct:(e,t,r)=>(t[0]=self.__envade$rewrite.url.rewriteUrl(t[0],i()),Reflect.construct(e,t,r))}),window.Worklet.prototype.addModule=new Proxy(window.Worklet.prototype.addModule,{apply:(e,t,r)=>(r[0]=self.__envade$rewrite.url.rewriteUrl(r[0],i()),Reflect.apply(e,t,r))}),Object.defineProperties(window.navigator,{}),"sendBeacon"in globalThis.navigator&&Object.defineProperty(globalThis.navigator,"sendBeacon",{configurable:!0,writable:!0,value:new Proxy(globalThis.navigator.sendBeacon,{apply:(e,t,r)=>(r[0]=self.__envade$rewrite.url.rewriteUrl(r[0],i()),Reflect.apply(e,t,r))})});let o=window.performance.getEntriesByType;window.performance.getEntriesByType=function(e){let t=o.call(this,e);return["navigation","resource"].includes(e)?t.map(e=>new Proxy(e,{get:(e,t,r)=>"name"===t?self.__envade$rewrite.url.rewriteUrl(e.name,i().href):Reflect.get(e,t,e)})):t},window.postMessage=new Proxy(window.postMessage,{apply:(e,t,r)=>(r[1]&&(r[1]=self.__envade$rewrite.url.rewriteUrl(r[0],i())),Reflect.apply(e,t,r))}),r(988),window.fetch=new Proxy(window.fetch,{apply:(e,t,r)=>(("string"==typeof r[0]||r[0]instanceof URL)&&(r[0]=self.__envade$rewrite.url.rewriteUrl(r[0],i().href)),Reflect.apply(e,t,r))}),window.Request=new Proxy(Request,{construct:(e,t,r)=>(("string"==typeof t[0]||t[0]instanceof URL)&&(t[0]=self.__envade$rewrite.url.rewriteUrl(t[0],i().href)),Reflect.construct(e,t,r))});let d=Object.getOwnPropertyDescriptor(Response.prototype,"url");Object.defineProperty(Response.prototype,"url",{get(){let e=d.get.call(this);return self.__envade$rewrite.url.rewriteUrl(e,i().href)},configurable:!0,enumerable:!0});let h=Object.getOwnPropertyDescriptor(Request.prototype,"url");Object.defineProperty(Request.prototype,"url",{get(){let e=h.get.call(this);return self.__envade$rewrite.url.rewriteUrl(e,i().href)},configurable:!0,enumerable:!0});let c=XMLHttpRequest.prototype.open,f=XMLHttpRequest.prototype.send,u=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.open=new Proxy(c,{apply(e,t,r){let n=r[0],a=r[1];a instanceof URL&&(a=a.href);let s=i(),l=self.__envade$rewrite.url.rewriteUrl(a,s);return r[1]=l,t.__envade$method=n,t.__envade$url=l,t.__envade$headers=new Headers,Reflect.apply(e,t,r)}}),XMLHttpRequest.prototype.setRequestHeader=new Proxy(u,{apply:(e,t,r)=>(t.__envade$headers||(t.__envade$headers=new Headers),t.__envade$headers.set(r[0],r[1]),Reflect.apply(e,t,r))}),XMLHttpRequest.prototype.send=new Proxy(f,{apply(e,t,r){let n=i(),a=t.__envade$headers||new Headers,s=new Headers(self.__envade$rewrite.headers(a,n));s.forEach((e,r)=>{u.call(t,r,e)});let l=r[0],o=s.get("Content-Type")||"";if(l&&"string"==typeof l&&o.includes("application/json"))try{let e=JSON.parse(l);for(let t in e){let r=e[t];"string"==typeof r&&/^https?:\/\//.test(r)&&(e[t]=self.__envade$rewrite.url.rewriteUrl(r,n))}l=JSON.stringify(e)}catch{}return r[0]=l,Reflect.apply(e,t,r)}});let p=globalThis.fetch,w=globalThis.SharedWorker,m=globalThis.localStorage,g=globalThis.navigator.serviceWorker,b=MessagePort.prototype.postMessage,y={prototype:{send:WebSocket.prototype.send},CLOSED:WebSocket.CLOSED,CLOSING:WebSocket.CLOSING,CONNECTING:WebSocket.CONNECTING,OPEN:WebSocket.OPEN};async function v(){let e=Promise.race([Promise.any((await self.clients.matchAll({type:"window",includeUncontrolled:!0})).map(async e=>{let t,r=await (t=new MessageChannel,new Promise(r=>{e.postMessage({type:"getPort",port:t.port2},[t.port2]),t.port1.onmessage=e=>{r(e.data)}}));return await k(r),r})),new Promise((e,t)=>setTimeout(t,1e3,TypeError("timeout")))]);try{return await e}catch(e){if(e instanceof AggregateError)throw console.error("bare-mux: failed to get a bare-mux SharedWorker MessagePort as all clients returned an invalid MessagePort."),Error("All clients returned an invalid MessagePort.");return console.warn("bare-mux: failed to get a bare-mux SharedWorker MessagePort within 1s, retrying"),await v()}}function k(e){let t=new MessageChannel,r=new Promise((e,r)=>{t.port1.onmessage=t=>{"pong"===t.data.type&&e()},setTimeout(r,1500)});return b.call(e,{message:{type:"ping"},port:t.port2},[t.port2]),r}function x(e,t){let r=new w(e,"bare-mux-worker");return t&&g.addEventListener("message",t=>{if("getPort"===t.data.type&&t.data.port){console.debug("bare-mux: recieved request for port from sw");let r=new w(e,"bare-mux-worker");b.call(t.data.port,r.port,[r.port])}}),r.port}class E{constructor(e){this.channel=new BroadcastChannel("bare-mux"),e instanceof MessagePort||e instanceof Promise?this.port=e:this.createChannel(e,!0)}createChannel(e,t){if(self.clients)this.port=v(),this.channel.onmessage=e=>{"refreshPort"===e.data.type&&(this.port=v())};else if(e&&SharedWorker){if(!e.startsWith("/")&&!e.includes("://"))throw Error("Invalid URL. Must be absolute or start at the root.");this.port=x(e,t),console.debug("bare-mux: setting localStorage bare-mux-path to",e),m["bare-mux-path"]=e}else{if(!SharedWorker)throw Error("Unable to get a channel to the SharedWorker.");{let e=m["bare-mux-path"];if(console.debug("bare-mux: got localStorage bare-mux-path:",e),!e)throw Error("Unable to get bare-mux workerPath from localStorage.");this.port=x(e,t)}}}async sendMessage(e,t){this.port instanceof Promise&&(this.port=await this.port);try{await k(this.port)}catch{return console.warn("bare-mux: Failed to get a ping response from the worker within 1.5s. Assuming port is dead."),this.createChannel(),await this.sendMessage(e,t)}let r=new MessageChannel,n=[r.port2,...t||[]],a=new Promise((e,t)=>{r.port1.onmessage=r=>{let n=r.data;"error"===n.type?t(n.error):e(n)}});return b.call(this.port,{message:e,port:r.port2},n),await a}}class S extends EventTarget{constructor(e,t=[],r,n){super(),this.protocols=t,this.readyState=y.CONNECTING,this.url=e.toString(),this.protocols=t;let a=e=>{this.protocols=e,this.readyState=y.OPEN;let t=new Event("open");this.dispatchEvent(t)},s=async e=>{let t=new MessageEvent("message",{data:e});this.dispatchEvent(t)},i=(e,t)=>{this.readyState=y.CLOSED;let r=new CloseEvent("close",{code:e,reason:t});this.dispatchEvent(r)},l=()=>{this.readyState=y.CLOSED;let e=new Event("error");this.dispatchEvent(e)};this.channel=new MessageChannel,this.channel.port1.onmessage=e=>{"open"===e.data.type?a(e.data.args[0]):"message"===e.data.type?s(e.data.args[0]):"close"===e.data.type?i(e.data.args[0],e.data.args[1]):"error"===e.data.type&&l()},r.sendMessage({type:"websocket",websocket:{url:e.toString(),protocols:t,requestHeaders:n,channel:this.channel.port2}},[this.channel.port2])}send(...e){if(this.readyState===y.CONNECTING)throw new DOMException("Failed to execute 'send' on 'WebSocket': Still in CONNECTING state.");let t=e[0];t.buffer&&(t=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)),b.call(this.channel.port1,{type:"data",data:t},t instanceof ArrayBuffer?[t]:[])}close(e,t){b.call(this.channel.port1,{type:"close",closeCode:e,closeReason:t})}}let A=["ws:","wss:"],L=[101,204,205,304],z=[301,302,303,307,308];function U(e){let t=e.length;for(;--t>=0;)e[t]=0}console.debug("bare-mux: running v2.1.7 (build c56d286)");let T=573,M=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),R=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),O=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),H=Array(576);U(H);let $=Array(60);U($);let P=Array(512);U(P);let W=Array(256);U(W);let I=Array(29);U(I);let N=Array(30);function D(e,t,r,n,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}function G(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}U(N);let Z=e=>e<256?P[e]:P[256+(e>>>7)],j=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},B=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,j(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},V=(e,t,r)=>{B(e,r[2*t],r[2*t+1])},F=(e,t)=>{let r=0;do r|=1&e,e>>>=1,r<<=1;while(--t>0);return r>>>1},q=e=>{16===e.bi_valid?(j(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},X=(e,t)=>{let r,n,a,s,i,l,o=t.dyn_tree,d=t.max_code,h=t.stat_desc.static_tree,c=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,p=t.stat_desc.max_length,w=0;for(s=0;s<=15;s++)e.bl_count[s]=0;for(o[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<T;r++)(s=o[2*o[2*(n=e.heap[r])+1]+1]+1)>p&&(s=p,w++),o[2*n+1]=s,!(n>d)&&(e.bl_count[s]++,i=0,n>=u&&(i=f[n-u]),l=o[2*n],e.opt_len+=l*(s+i),c&&(e.static_len+=l*(h[2*n+1]+i)));if(0!==w){do{for(s=p-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[p]--,w-=2}while(w>0);for(s=p;0!==s;s--)for(n=e.bl_count[s];0!==n;)!((a=e.heap[--r])>d)&&(o[2*a+1]!==s&&(e.opt_len+=(s-o[2*a+1])*o[2*a],o[2*a+1]=s),n--)}},K=(e,t,r)=>{let n,a,s=Array(16),i=0;for(n=1;n<=15;n++)i=i+r[n-1]<<1,s[n]=i;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=F(s[t]++,t))}},Y=()=>{let r,a,s,i,l,o=Array(16);for(i=0,s=0;i<28;i++)for(r=0,I[i]=s;r<1<<M[i];r++)W[s++]=i;for(W[s-1]=i,l=0,i=0;i<16;i++)for(r=0,N[i]=l;r<1<<R[i];r++)P[l++]=i;for(l>>=7;i<30;i++)for(r=0,N[i]=l<<7;r<1<<R[i]-7;r++)P[256+l++]=i;for(a=0;a<=15;a++)o[a]=0;for(r=0;r<=143;)H[2*r+1]=8,r++,o[8]++;for(;r<=255;)H[2*r+1]=9,r++,o[9]++;for(;r<=279;)H[2*r+1]=7,r++,o[7]++;for(;r<=287;)H[2*r+1]=8,r++,o[8]++;for(K(H,287,o),r=0;r<30;r++)$[2*r+1]=5,$[2*r]=F(r,5);e=new D(H,M,257,286,15),t=new D($,R,0,30,15),n=new D([],O,0,19,7)},J=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Q=e=>{e.bi_valid>8?j(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},ee=(e,t,r,n)=>{let a=2*t,s=2*r;return e[a]<e[s]||e[a]===e[s]&&n[t]<=n[r]},et=(e,t,r)=>{let n=e.heap[r],a=r<<1;for(;a<=e.heap_len&&(a<e.heap_len&&ee(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!ee(t,n,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=n},er=(e,t,r)=>{let n,a,s,i,l=0;if(0!==e.sym_next)do n=(255&e.pending_buf[e.sym_buf+l++])+((255&e.pending_buf[e.sym_buf+l++])<<8),a=e.pending_buf[e.sym_buf+l++],0===n?V(e,a,t):(V(e,(s=W[a])+256+1,t),0!==(i=M[s])&&B(e,a-=I[s],i),V(e,s=Z(--n),r),0!==(i=R[s])&&B(e,n-=N[s],i));while(l<e.sym_next);V(e,256,t)},en=(e,t)=>{let r,n,a,s=t.dyn_tree,i=t.stat_desc.static_tree,l=t.stat_desc.has_stree,o=t.stat_desc.elems,d=-1;for(r=0,e.heap_len=0,e.heap_max=T;r<o;r++)0!==s[2*r]?(e.heap[++e.heap_len]=d=r,e.depth[r]=0):s[2*r+1]=0;for(;e.heap_len<2;)s[2*(a=e.heap[++e.heap_len]=d<2?++d:0)]=1,e.depth[a]=0,e.opt_len--,l&&(e.static_len-=i[2*a+1]);for(t.max_code=d,r=e.heap_len>>1;r>=1;r--)et(e,s,r);a=o;do r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],et(e,s,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,s[2*a]=s[2*r]+s[2*n],e.depth[a]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,s[2*r+1]=s[2*n+1]=a,e.heap[1]=a++,et(e,s,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],X(e,t),K(s,d,e.bl_count)},ea=(e,t,r)=>{let n,a,s=-1,i=t[1],l=0,o=7,d=4;for(0===i&&(o=138,d=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)a=i,i=t[(n+1)*2+1],++l<o&&a===i||(l<d?e.bl_tree[2*a]+=l:0!==a?(a!==s&&e.bl_tree[2*a]++,e.bl_tree[32]++):l<=10?e.bl_tree[34]++:e.bl_tree[36]++,l=0,s=a,0===i?(o=138,d=3):a===i?(o=6,d=3):(o=7,d=4))},es=(e,t,r)=>{let n,a,s=-1,i=t[1],l=0,o=7,d=4;for(0===i&&(o=138,d=3),n=0;n<=r;n++)if(a=i,i=t[(n+1)*2+1],!(++l<o)||a!==i){if(l<d)do V(e,a,e.bl_tree);while(0!=--l);else 0!==a?(a!==s&&(V(e,a,e.bl_tree),l--),V(e,16,e.bl_tree),B(e,l-3,2)):l<=10?(V(e,17,e.bl_tree),B(e,l-3,3)):(V(e,18,e.bl_tree),B(e,l-11,7));l=0,s=a,0===i?(o=138,d=3):a===i?(o=6,d=3):(o=7,d=4)}},ei=e=>{let t;for(ea(e,e.dyn_ltree,e.l_desc.max_code),ea(e,e.dyn_dtree,e.d_desc.max_code),en(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*C[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t},el=(e,t,r,n)=>{let a;for(B(e,t-257,5),B(e,r-1,5),B(e,n-4,4),a=0;a<n;a++)B(e,e.bl_tree[2*C[a]+1],3);es(e,e.dyn_ltree,t-1),es(e,e.dyn_dtree,r-1)},eo=e=>{let t,r=0xf3ffc07f;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0},ed=!1,eh=(e,t,r,n)=>{B(e,0+ +!!n,3),Q(e),j(e,r),j(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r};var ec={_tr_init:r=>{ed||(Y(),ed=!0),r.l_desc=new G(r.dyn_ltree,e),r.d_desc=new G(r.dyn_dtree,t),r.bl_desc=new G(r.bl_tree,n),r.bi_buf=0,r.bi_valid=0,J(r)},_tr_stored_block:eh,_tr_flush_block:(e,t,r,n)=>{let a,s,i=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=eo(e)),en(e,e.l_desc),en(e,e.d_desc),i=ei(e),a=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=a&&(a=s)):a=s=r+5,r+4<=a&&-1!==t?eh(e,t,r,n):4===e.strategy||s===a?(B(e,2+ +!!n,3),er(e,H,$)):(B(e,4+ +!!n,3),el(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),er(e,e.dyn_ltree,e.dyn_dtree)),J(e),n&&Q(e)},_tr_tally:(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[(W[r]+256+1)*2]++,e.dyn_dtree[2*Z(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{B(e,2,3),V(e,256,H),q(e)}},ef=(e,t,r,n)=>{let a=65535&e,s=e>>>16&65535,i=0;for(;0!==r;){i=r>2e3?2e3:r,r-=i;do s=s+(a=a+t[n++]|0)|0;while(--i);a%=65521,s%=65521}return a|s<<16};let eu=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?0xedb88320^e>>>1:e>>>1;t[r]=e}return t})());var e_=(e,t,r,n)=>{let a=n+r;e^=-1;for(let r=n;r<a;r++)e=e>>>8^eu[(e^t[r])&255];return -1^e},ep={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ew={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:em,_tr_stored_block:eg,_tr_flush_block:eb,_tr_tally:ey,_tr_align:ev}=ec,{Z_NO_FLUSH:ek,Z_PARTIAL_FLUSH:ex,Z_FULL_FLUSH:eE,Z_FINISH:eS,Z_BLOCK:eA,Z_OK:eL,Z_STREAM_END:ez,Z_STREAM_ERROR:eU,Z_DATA_ERROR:eT,Z_BUF_ERROR:eM,Z_DEFAULT_COMPRESSION:eR,Z_FILTERED:eO,Z_HUFFMAN_ONLY:eC,Z_RLE:eH,Z_FIXED:e$,Z_DEFAULT_STRATEGY:eP,Z_UNKNOWN:eW,Z_DEFLATED:eI}=ew,eN=573,eD=(e,t)=>(e.msg=ep[t],t),eG=e=>2*e-9*(e>4),eZ=e=>{let t=e.length;for(;--t>=0;)e[t]=0},ej=e=>{let t,r,n,a=e.w_size;n=t=e.hash_size;do r=e.head[--n],e.head[n]=r>=a?r-a:0;while(--t);n=t=a;do r=e.prev[--n],e.prev[n]=r>=a?r-a:0;while(--t)},eB=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,eV=e=>{let t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},eF=(e,t)=>{eb(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,eV(e.strm)},eq=(e,t)=>{e.pending_buf[e.pending++]=t},eX=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},eK=(e,t,r,n)=>{let a=e.avail_in;return(a>n&&(a=n),0===a)?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),r),1===e.state.wrap?e.adler=ef(e.adler,t,a,r):2===e.state.wrap&&(e.adler=e_(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)},eY=(e,t)=>{let r,n,a=e.max_chain_length,s=e.strstart,i=e.prev_length,l=e.nice_match,o=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,d=e.window,h=e.w_mask,c=e.prev,f=e.strstart+258,u=d[s+i-1],p=d[s+i];e.prev_length>=e.good_match&&(a>>=2),l>e.lookahead&&(l=e.lookahead);do{if(d[(r=t)+i]!==p||d[r+i-1]!==u||d[r]!==d[s]||d[++r]!==d[s+1])continue;s+=2,r++;do;while(d[++s]===d[++r]&&d[++s]===d[++r]&&d[++s]===d[++r]&&d[++s]===d[++r]&&d[++s]===d[++r]&&d[++s]===d[++r]&&d[++s]===d[++r]&&d[++s]===d[++r]&&s<f);if(n=258-(f-s),s=f-258,n>i){if(e.match_start=t,i=n,n>=l)break;u=d[s+i-1],p=d[s+i]}}while((t=c[t&h])>o&&0!=--a);return i<=e.lookahead?i:e.lookahead},eJ=e=>{let t,r,n,a=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-262)&&(e.window.set(e.window.subarray(a,a+a-r),0),e.match_start-=a,e.strstart-=a,e.block_start-=a,e.insert>e.strstart&&(e.insert=e.strstart),ej(e),r+=a),0===e.strm.avail_in)break;if(t=eK(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=t,e.lookahead+e.insert>=3)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=eB(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=eB(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},eQ=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,a,s,i=0,l=e.strm.avail_in;do{if(n=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s||(s=e.strm.avail_out-s,n>(a=e.strstart-e.block_start)+e.strm.avail_in&&(n=a+e.strm.avail_in),n>s&&(n=s),n<r&&(0===n&&t!==eS||t===ek||n!==a+e.strm.avail_in)))break;i=+(t===eS&&n===a+e.strm.avail_in),eg(e,0,0,i),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,eV(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(eK(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===i);return((l-=e.strm.avail_in)&&(l>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=l&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-l,e.strm.next_in),e.strstart),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),i)?4:t!==ek&&t!==eS&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(eK(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,r=(s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s)>e.w_size?e.w_size:s,((a=e.strstart-e.block_start)>=r||(a||t===eS)&&t!==ek&&0===e.strm.avail_in&&a<=s)&&(n=a>s?s:a,i=+(t===eS&&0===e.strm.avail_in&&n===a),eg(e,e.block_start,n,i),e.block_start+=n,eV(e.strm)),i?3:1)},e0=(e,t)=>{let r,n;for(;;){if(e.lookahead<262){if(eJ(e),e.lookahead<262&&t===ek)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=eB(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-262&&(e.match_length=eY(e,r)),e.match_length>=3)if(n=ey(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=eB(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=eB(e,e.ins_h,e.window[e.strstart+1]);else n=ey(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(eF(e,!1),0===e.strm.avail_out))return 1}return(e.insert=e.strstart<2?e.strstart:2,t===eS)?(eF(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eF(e,!1),0===e.strm.avail_out)?1:2},e1=(e,t)=>{let r,n,a;for(;;){if(e.lookahead<262){if(eJ(e),e.lookahead<262&&t===ek)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=eB(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-262&&(e.match_length=eY(e,r),e.match_length<=5&&(e.strategy===eO||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,n=ey(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=eB(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(eF(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=ey(e,0,e.window[e.strstart-1]))&&eF(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return(e.match_available&&(n=ey(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===eS)?(eF(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eF(e,!1),0===e.strm.avail_out)?1:2},e2=(e,t)=>{let r,n,a,s,i=e.window;for(;;){if(e.lookahead<=258){if(eJ(e),e.lookahead<=258&&t===ek)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=i[a=e.strstart-1])===i[++a]&&n===i[++a]&&n===i[++a]){s=e.strstart+258;do;while(n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&a<s);e.match_length=258-(s-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=ey(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=ey(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(eF(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===eS)?(eF(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eF(e,!1),0===e.strm.avail_out)?1:2},e5=(e,t)=>{let r;for(;;){if(0===e.lookahead&&(eJ(e),0===e.lookahead)){if(t===ek)return 1;break}if(e.match_length=0,r=ey(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(eF(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===eS)?(eF(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eF(e,!1),0===e.strm.avail_out)?1:2};function e6(e,t,r,n,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=a}let e3=[new e6(0,0,0,0,eQ),new e6(4,4,8,4,e0),new e6(4,5,16,8,e0),new e6(4,6,32,32,e0),new e6(4,4,16,16,e1),new e6(8,16,32,32,e1),new e6(8,16,128,128,e1),new e6(8,32,128,256,e1),new e6(32,128,258,1024,e1),new e6(32,258,258,4096,e1)],e8=e=>{e.window_size=2*e.w_size,eZ(e.head),e.max_lazy_match=e3[e.level].max_lazy,e.good_match=e3[e.level].good_length,e.nice_match=e3[e.level].nice_length,e.max_chain_length=e3[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0};function e4(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=eI,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*eN),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),eZ(this.dyn_ltree),eZ(this.dyn_dtree),eZ(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),eZ(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),eZ(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let e9=e=>{if(!e)return 1;let t=e.state;return t&&t.strm===e&&(42===t.status||57===t.status||69===t.status||73===t.status||91===t.status||103===t.status||113===t.status||666===t.status)?0:1},e7=e=>{if(e9(e))return eD(e,eU);e.total_in=e.total_out=0,e.data_type=eW;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=+(2!==t.wrap),t.last_flush=-2,em(t),eL},te=e=>{let t=e7(e);return t===eL&&e8(e.state),t};var tt={deflateInit2:(e,t,r,n,a,s)=>{if(!e)return eU;let i=1;if(t===eR&&(t=6),n<0?(i=0,n=-n):n>15&&(i=2,n-=16),a<1||a>9||r!==eI||n<8||n>15||t<0||t>9||s<0||s>e$||8===n&&1!==i)return eD(e,eU);8===n&&(n=9);let l=new e4;return e.state=l,l.strm=e,l.status=42,l.wrap=i,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new Uint8Array(2*l.w_size),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=(l.lit_bufsize-1)*3,l.level=t,l.strategy=s,l.method=r,te(e)},deflateSetHeader:(e,t)=>e9(e)||2!==e.state.wrap?eU:(e.state.gzhead=t,eL),deflate:(e,t)=>{if(e9(e)||t>eA||t<0)return e?eD(e,eU):eU;let r=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===r.status&&t!==eS)return eD(e,0===e.avail_out?eM:eU);let n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(eV(e),0===e.avail_out)return r.last_flush=-1,eL}else if(0===e.avail_in&&eG(t)<=eG(n)&&t!==eS)return eD(e,eM);if(666===r.status&&0!==e.avail_in)return eD(e,eM);if(42===r.status&&0===r.wrap&&(r.status=113),42===r.status){let t=eI+(r.w_bits-8<<4)<<8,n=-1;if(t|=(r.strategy>=eC||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(t|=32),eX(r,t+=31-t%31),0!==r.strstart&&(eX(r,e.adler>>>16),eX(r,65535&e.adler)),e.adler=1,r.status=113,eV(e),0!==r.pending)return r.last_flush=-1,eL}if(57===r.status){if(e.adler=0,eq(r,31),eq(r,139),eq(r,8),r.gzhead)eq(r,+!!r.gzhead.text+2*!!r.gzhead.hcrc+4*!!r.gzhead.extra+8*!!r.gzhead.name+16*!!r.gzhead.comment),eq(r,255&r.gzhead.time),eq(r,r.gzhead.time>>8&255),eq(r,r.gzhead.time>>16&255),eq(r,r.gzhead.time>>24&255),eq(r,9===r.level?2:4*(r.strategy>=eC||r.level<2)),eq(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(eq(r,255&r.gzhead.extra.length),eq(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=e_(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(eq(r,0),eq(r,0),eq(r,0),eq(r,0),eq(r,0),eq(r,9===r.level?2:4*(r.strategy>=eC||r.level<2)),eq(r,3),r.status=113,eV(e),0!==r.pending)return r.last_flush=-1,eL}if(69===r.status){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let a=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=e_(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=a,eV(e),0!==r.pending)return r.last_flush=-1,eL;t=0,n-=a}let a=new Uint8Array(r.gzhead.extra);r.pending_buf.set(a.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(e.adler=e_(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=e_(e.adler,r.pending_buf,r.pending-n,n)),eV(e),0!==r.pending)return r.last_flush=-1,eL;n=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,eq(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=e_(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=e_(e.adler,r.pending_buf,r.pending-n,n)),eV(e),0!==r.pending)return r.last_flush=-1,eL;n=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,eq(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=e_(e.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(eV(e),0!==r.pending))return r.last_flush=-1,eL;eq(r,255&e.adler),eq(r,e.adler>>8&255),e.adler=0}if(r.status=113,eV(e),0!==r.pending)return r.last_flush=-1,eL}if(0!==e.avail_in||0!==r.lookahead||t!==ek&&666!==r.status){let n=0===r.level?eQ(r,t):r.strategy===eC?e5(r,t):r.strategy===eH?e2(r,t):e3[r.level].func(r,t);if((3===n||4===n)&&(r.status=666),1===n||3===n)return 0===e.avail_out&&(r.last_flush=-1),eL;if(2===n&&(t===ex?ev(r):t!==eA&&(eg(r,0,0,!1),t===eE&&(eZ(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),eV(e),0===e.avail_out))return r.last_flush=-1,eL}return t!==eS?eL:r.wrap<=0?ez:(2===r.wrap?(eq(r,255&e.adler),eq(r,e.adler>>8&255),eq(r,e.adler>>16&255),eq(r,e.adler>>24&255),eq(r,255&e.total_in),eq(r,e.total_in>>8&255),eq(r,e.total_in>>16&255),eq(r,e.total_in>>24&255)):(eX(r,e.adler>>>16),eX(r,65535&e.adler)),eV(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?eL:ez)},deflateEnd:e=>{if(e9(e))return eU;let t=e.state.status;return e.state=null,113===t?eD(e,eT):eL},deflateSetDictionary:(e,t)=>{let r=t.length;if(e9(e))return eU;let n=e.state,a=n.wrap;if(2===a||1===a&&42!==n.status||n.lookahead)return eU;if(1===a&&(e.adler=ef(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===a&&(eZ(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}let s=e.avail_in,i=e.next_in,l=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,eJ(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do n.ins_h=eB(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++;while(--t);n.strstart=e,n.lookahead=2,eJ(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=i,e.input=l,e.avail_in=s,n.wrap=a,eL}};let tr=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var tn={assign:function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let r=t.shift();if(r){if("object"!=typeof r)throw TypeError(r+"must be non-object");for(let t in r)tr(r,t)&&(e[t]=r[t])}}return e},flattenChunks:e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;let r=new Uint8Array(t);for(let t=0,n=0,a=e.length;t<a;t++){let a=e[t];r.set(a,n),n+=a.length}return r}};let ta=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){ta=!1}let ts=new Uint8Array(256);for(let e=0;e<256;e++)ts[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;ts[254]=ts[254]=1;let ti=(e,t)=>{if(t<65534&&e.subarray&&ta)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var tl={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,s,i=e.length,l=0;for(a=0;a<i;a++)(64512&(r=e.charCodeAt(a)))==55296&&a+1<i&&(64512&(n=e.charCodeAt(a+1)))==56320&&(r=65536+(r-55296<<10)+(n-56320),a++),l+=r<128?1:r<2048?2:r<65536?3:4;for(s=0,t=new Uint8Array(l),a=0;s<l;a++)(64512&(r=e.charCodeAt(a)))==55296&&a+1<i&&(64512&(n=e.charCodeAt(a+1)))==56320&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t},buf2string:(e,t)=>{let r,n,a=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let s=Array(2*a);for(n=0,r=0;r<a;){let t=e[r++];if(t<128){s[n++]=t;continue}let i=ts[t];if(i>4){s[n++]=65533,r+=i-1;continue}for(t&=2===i?31:3===i?15:7;i>1&&r<a;)t=t<<6|63&e[r++],i--;if(i>1){s[n++]=65533;continue}t<65536?s[n++]=t:(t-=65536,s[n++]=55296|t>>10&1023,s[n++]=56320|1023&t)}return ti(s,n)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(192&e[r])==128;)r--;return r<0||0===r?t:r+ts[e[r]]>t?r:t}},to=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let td=Object.prototype.toString,{Z_NO_FLUSH:th,Z_SYNC_FLUSH:tc,Z_FULL_FLUSH:tf,Z_FINISH:tu,Z_OK:t_,Z_STREAM_END:tp,Z_DEFAULT_COMPRESSION:tw,Z_DEFAULT_STRATEGY:tm,Z_DEFLATED:tg}=ew;function tb(e){this.options=tn.assign({level:tw,method:tg,chunkSize:16384,windowBits:15,memLevel:8,strategy:tm},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new to,this.strm.avail_out=0;let r=tt.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==t_)throw Error(ep[r]);if(t.header&&tt.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?tl.string2buf(t.dictionary):"[object ArrayBuffer]"===td.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=tt.deflateSetDictionary(this.strm,e))!==t_)throw Error(ep[r]);this._dict_set=!0}}function ty(e,t){let r=new tb(t);if(r.push(e,!0),r.err)throw r.msg||ep[r.err];return r.result}tb.prototype.push=function(e,t){let r,n,a=this.strm,s=this.options.chunkSize;if(this.ended)return!1;for(n=t===~~t?t:!0===t?tu:th,"string"==typeof e?a.input=tl.string2buf(e):"[object ArrayBuffer]"===td.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){if(0===a.avail_out&&(a.output=new Uint8Array(s),a.next_out=0,a.avail_out=s),(n===tc||n===tf)&&a.avail_out<=6){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if((r=tt.deflate(a,n))===tp)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),r=tt.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===t_;if(0===a.avail_out){this.onData(a.output);continue}if(n>0&&a.next_out>0){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(0===a.avail_in)break}return!0},tb.prototype.onData=function(e){this.chunks.push(e)},tb.prototype.onEnd=function(e){e===t_&&(this.result=tn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var tv=function(e,t){let r,n,a,s,i,l,o,d,h,c,f,u,p,w,m,g,b,y,v,k,x,E,S,A,L=e.state;r=e.next_in,S=e.input,n=r+(e.avail_in-5),a=e.next_out,A=e.output,s=a-(t-e.avail_out),i=a+(e.avail_out-257),l=L.dmax,o=L.wsize,d=L.whave,h=L.wnext,c=L.window,f=L.hold,u=L.bits,p=L.lencode,w=L.distcode,m=(1<<L.lenbits)-1,g=(1<<L.distbits)-1;e:do for(u<15&&(f+=S[r++]<<u,u+=8,f+=S[r++]<<u,u+=8),b=p[f&m];;){if(f>>>=y=b>>>24,u-=y,0==(y=b>>>16&255))A[a++]=65535&b;else if(16&y)for(v=65535&b,(y&=15)&&(u<y&&(f+=S[r++]<<u,u+=8),v+=f&(1<<y)-1,f>>>=y,u-=y),u<15&&(f+=S[r++]<<u,u+=8,f+=S[r++]<<u,u+=8),b=w[f&g];;){if(f>>>=y=b>>>24,u-=y,16&(y=b>>>16&255)){if(k=65535&b,u<(y&=15)&&(f+=S[r++]<<u,(u+=8)<y&&(f+=S[r++]<<u,u+=8)),(k+=f&(1<<y)-1)>l){e.msg="invalid distance too far back",L.mode=16209;break e}if(f>>>=y,u-=y,k>(y=a-s)){if((y=k-y)>d&&L.sane){e.msg="invalid distance too far back",L.mode=16209;break e}if(x=0,E=c,0===h){if(x+=o-y,y<v){v-=y;do A[a++]=c[x++];while(--y);x=a-k,E=A}}else if(h<y){if(x+=o+h-y,(y-=h)<v){v-=y;do A[a++]=c[x++];while(--y);if(x=0,h<v){v-=y=h;do A[a++]=c[x++];while(--y);x=a-k,E=A}}}else if(x+=h-y,y<v){v-=y;do A[a++]=c[x++];while(--y);x=a-k,E=A}for(;v>2;)A[a++]=E[x++],A[a++]=E[x++],A[a++]=E[x++],v-=3;v&&(A[a++]=E[x++],v>1&&(A[a++]=E[x++]))}else{x=a-k;do A[a++]=A[x++],A[a++]=A[x++],A[a++]=A[x++],v-=3;while(v>2);v&&(A[a++]=A[x++],v>1&&(A[a++]=A[x++]))}}else if((64&y)==0){b=w[(65535&b)+(f&(1<<y)-1)];continue}else{e.msg="invalid distance code",L.mode=16209;break e}break}else if((64&y)==0){b=p[(65535&b)+(f&(1<<y)-1)];continue}else if(32&y){L.mode=16191;break e}else{e.msg="invalid literal/length code",L.mode=16209;break e}break}while(r<n&&a<i);r-=v=u>>3,u-=v<<3,f&=(1<<u)-1,e.next_in=r,e.next_out=a,e.avail_in=r<n?5+(n-r):5-(r-n),e.avail_out=a<i?257+(i-a):257-(a-i),L.hold=f,L.bits=u};let tk=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),tx=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),tE=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),tS=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var tA=(e,t,r,n,a,s,i,l)=>{let o,d,h,c,f,u,p,w,m,g=l.bits,b=0,y=0,v=0,k=0,x=0,E=0,S=0,A=0,L=0,z=0,U=null,T=new Uint16Array(16),M=new Uint16Array(16),R=null;for(b=0;b<=15;b++)T[b]=0;for(y=0;y<n;y++)T[t[r+y]]++;for(k=15,x=g;k>=1&&0===T[k];k--);if(x>k&&(x=k),0===k)return a[s++]=0x1400000,a[s++]=0x1400000,l.bits=1,0;for(v=1;v<k&&0===T[v];v++);for(x<v&&(x=v),A=1,b=1;b<=15;b++)if(A<<=1,(A-=T[b])<0)return -1;if(A>0&&(0===e||1!==k))return -1;for(b=1,M[1]=0;b<15;b++)M[b+1]=M[b]+T[b];for(y=0;y<n;y++)0!==t[r+y]&&(i[M[t[r+y]]++]=y);if(0===e?(U=R=i,u=20):1===e?(U=tk,R=tx,u=257):(U=tE,R=tS,u=0),z=0,y=0,b=v,f=s,E=x,S=0,h=-1,c=(L=1<<x)-1,1===e&&L>852||2===e&&L>592)return 1;for(;;){p=b-S,i[y]+1<u?(w=0,m=i[y]):i[y]>=u?(w=R[i[y]-u],m=U[i[y]-u]):(w=96,m=0),o=1<<b-S,v=d=1<<E;do a[f+(z>>S)+(d-=o)]=p<<24|w<<16|m;while(0!==d);for(o=1<<b-1;z&o;)o>>=1;if(0!==o?(z&=o-1,z+=o):z=0,y++,0==--T[b]){if(b===k)break;b=t[r+i[y]]}if(b>x&&(z&c)!==h){for(0===S&&(S=x),f+=v,A=1<<(E=b-S);E+S<k&&!((A-=T[E+S])<=0);)E++,A<<=1;if(L+=1<<E,1===e&&L>852||2===e&&L>592)return 1;a[h=z&c]=x<<24|E<<16|f-s}}return 0!==z&&(a[f+z]=b-S<<24|4194304),l.bits=x,0};let{Z_FINISH:tL,Z_BLOCK:tz,Z_TREES:tU,Z_OK:tT,Z_STREAM_END:tM,Z_NEED_DICT:tR,Z_STREAM_ERROR:tO,Z_DATA_ERROR:tC,Z_MEM_ERROR:tH,Z_BUF_ERROR:t$,Z_DEFLATED:tP}=ew,tW=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function tI(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let tN=e=>{if(!e)return 1;let t=e.state;return+(!t||t.strm!==e||t.mode<16180||t.mode>16211)},tD=e=>{if(tN(e))return tO;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,tT},tG=e=>{if(tN(e))return tO;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,tD(e)},tZ=(e,t)=>{let r;if(tN(e))return tO;let n=e.state;return(t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15))?tO:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,tG(e))},tj=!0,tB=e=>{if(tj){a=new Int32Array(512),s=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(tA(1,e.lens,0,288,a,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;tA(2,e.lens,0,32,s,0,e.work,{bits:5}),tj=!1}e.lencode=a,e.lenbits=9,e.distcode=s,e.distbits=5},tV=(e,t,r,n)=>{let a,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(t.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):((a=s.wsize-s.wnext)>n&&(a=n),s.window.set(t.subarray(r-n,r-n+a),s.wnext),(n-=a)?(s.window.set(t.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0};var tF={inflateReset:tG,inflateInit2:(e,t)=>{if(!e)return tO;let r=new tI;e.state=r,r.strm=e,r.window=null,r.mode=16180;let n=tZ(e,t);return n!==tT&&(e.state=null),n},inflate:(e,t)=>{let r,n,a,s,i,l,o,d,h,c,f,u,p,w,m,g,b,y,v,k,x,E,S,A,L=0,z=new Uint8Array(4),U=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(tN(e)||!e.output||!e.input&&0!==e.avail_in)return tO;16191===(r=e.state).mode&&(r.mode=16192),i=e.next_out,a=e.output,o=e.avail_out,s=e.next_in,n=e.input,l=e.avail_in,d=r.hold,h=r.bits,c=l,f=o,E=tT;t:for(;;)switch(r.mode){case 16180:if(0===r.wrap){r.mode=16192;break}for(;h<16;){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}if(2&r.wrap&&35615===d){0===r.wbits&&(r.wbits=15),r.check=0,z[0]=255&d,z[1]=d>>>8&255,r.check=e_(r.check,z,2,0),d=0,h=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",r.mode=16209;break}if((15&d)!==tP){e.msg="unknown compression method",r.mode=16209;break}if(d>>>=4,h-=4,x=(15&d)+8,0===r.wbits&&(r.wbits=x),x>15||x>r.wbits){e.msg="invalid window size",r.mode=16209;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&d?16189:16191,d=0,h=0;break;case 16181:for(;h<16;){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}if(r.flags=d,(255&r.flags)!==tP){e.msg="unknown compression method",r.mode=16209;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=16209;break}r.head&&(r.head.text=d>>8&1),512&r.flags&&4&r.wrap&&(z[0]=255&d,z[1]=d>>>8&255,r.check=e_(r.check,z,2,0)),d=0,h=0,r.mode=16182;case 16182:for(;h<32;){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}r.head&&(r.head.time=d),512&r.flags&&4&r.wrap&&(z[0]=255&d,z[1]=d>>>8&255,z[2]=d>>>16&255,z[3]=d>>>24&255,r.check=e_(r.check,z,4,0)),d=0,h=0,r.mode=16183;case 16183:for(;h<16;){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}r.head&&(r.head.xflags=255&d,r.head.os=d>>8),512&r.flags&&4&r.wrap&&(z[0]=255&d,z[1]=d>>>8&255,r.check=e_(r.check,z,2,0)),d=0,h=0,r.mode=16184;case 16184:if(1024&r.flags){for(;h<16;){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}r.length=d,r.head&&(r.head.extra_len=d),512&r.flags&&4&r.wrap&&(z[0]=255&d,z[1]=d>>>8&255,r.check=e_(r.check,z,2,0)),d=0,h=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&((u=r.length)>l&&(u=l),u&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+u),x)),512&r.flags&&4&r.wrap&&(r.check=e_(r.check,n,u,s)),l-=u,s+=u,r.length-=u),r.length))break t;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===l)break t;u=0;do x=n[s+u++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x));while(x&&u<l);if(512&r.flags&&4&r.wrap&&(r.check=e_(r.check,n,u,s)),l-=u,s+=u,x)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===l)break t;u=0;do x=n[s+u++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x));while(x&&u<l);if(512&r.flags&&4&r.wrap&&(r.check=e_(r.check,n,u,s)),l-=u,s+=u,x)break t}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;h<16;){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}if(4&r.wrap&&d!==(65535&r.check)){e.msg="header crc mismatch",r.mode=16209;break}d=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=16191;break;case 16189:for(;h<32;){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}e.adler=r.check=tW(d),d=0,h=0,r.mode=16190;case 16190:if(0===r.havedict)return e.next_out=i,e.avail_out=o,e.next_in=s,e.avail_in=l,r.hold=d,r.bits=h,tR;e.adler=r.check=1,r.mode=16191;case 16191:if(t===tz||t===tU)break t;case 16192:if(r.last){d>>>=7&h,h-=7&h,r.mode=16206;break}for(;h<3;){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}switch(r.last=1&d,h-=1,3&(d>>>=1)){case 0:r.mode=16193;break;case 1:if(tB(r),r.mode=16199,t===tU){d>>>=2,h-=2;break t}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=16209}d>>>=2,h-=2;break;case 16193:for(d>>>=7&h,h-=7&h;h<32;){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",r.mode=16209;break}if(r.length=65535&d,d=0,h=0,r.mode=16194,t===tU)break t;case 16194:r.mode=16195;case 16195:if(u=r.length){if(u>l&&(u=l),u>o&&(u=o),0===u)break t;a.set(n.subarray(s,s+u),i),l-=u,s+=u,o-=u,i+=u,r.length-=u;break}r.mode=16191;break;case 16196:for(;h<14;){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}if(r.nlen=(31&d)+257,h-=5,r.ndist=(31&(d>>>=5))+1,h-=5,r.ncode=(15&(d>>>=5))+4,d>>>=4,h-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=16209;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;h<3;){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}r.lens[U[r.have++]]=7&d,d>>>=3,h-=3}for(;r.have<19;)r.lens[U[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,S={bits:r.lenbits},E=tA(0,r.lens,0,19,r.lencode,0,r.work,S),r.lenbits=S.bits,E){e.msg="invalid code lengths set",r.mode=16209;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;m=(L=r.lencode[d&(1<<r.lenbits)-1])>>>24,g=L>>>16&255,b=65535&L,!(m<=h);){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}if(b<16)d>>>=m,h-=m,r.lens[r.have++]=b;else{if(16===b){for(A=m+2;h<A;){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}if(d>>>=m,h-=m,0===r.have){e.msg="invalid bit length repeat",r.mode=16209;break}x=r.lens[r.have-1],u=3+(3&d),d>>>=2,h-=2}else if(17===b){for(A=m+3;h<A;){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}d>>>=m,h-=m,x=0,u=3+(7&d),d>>>=3,h-=3}else{for(A=m+7;h<A;){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}d>>>=m,h-=m,x=0,u=11+(127&d),d>>>=7,h-=7}if(r.have+u>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=16209;break}for(;u--;)r.lens[r.have++]=x}}if(16209===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=16209;break}if(r.lenbits=9,S={bits:r.lenbits},E=tA(1,r.lens,0,r.nlen,r.lencode,0,r.work,S),r.lenbits=S.bits,E){e.msg="invalid literal/lengths set",r.mode=16209;break}if(r.distbits=6,r.distcode=r.distdyn,S={bits:r.distbits},E=tA(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,S),r.distbits=S.bits,E){e.msg="invalid distances set",r.mode=16209;break}if(r.mode=16199,t===tU)break t;case 16199:r.mode=16200;case 16200:if(l>=6&&o>=258){e.next_out=i,e.avail_out=o,e.next_in=s,e.avail_in=l,r.hold=d,r.bits=h,tv(e,f),i=e.next_out,a=e.output,o=e.avail_out,s=e.next_in,n=e.input,l=e.avail_in,d=r.hold,h=r.bits,16191===r.mode&&(r.back=-1);break}for(r.back=0;m=(L=r.lencode[d&(1<<r.lenbits)-1])>>>24,g=L>>>16&255,b=65535&L,!(m<=h);){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}if(g&&(240&g)==0){for(y=m,v=g,k=b;m=(L=r.lencode[k+((d&(1<<y+v)-1)>>y)])>>>24,g=L>>>16&255,b=65535&L,!(y+m<=h);){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}d>>>=y,h-=y,r.back+=y}if(d>>>=m,h-=m,r.back+=m,r.length=b,0===g){r.mode=16205;break}if(32&g){r.back=-1,r.mode=16191;break}if(64&g){e.msg="invalid literal/length code",r.mode=16209;break}r.extra=15&g,r.mode=16201;case 16201:if(r.extra){for(A=r.extra;h<A;){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}r.length+=d&(1<<r.extra)-1,d>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;m=(L=r.distcode[d&(1<<r.distbits)-1])>>>24,g=L>>>16&255,b=65535&L,!(m<=h);){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}if((240&g)==0){for(y=m,v=g,k=b;m=(L=r.distcode[k+((d&(1<<y+v)-1)>>y)])>>>24,g=L>>>16&255,b=65535&L,!(y+m<=h);){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}d>>>=y,h-=y,r.back+=y}if(d>>>=m,h-=m,r.back+=m,64&g){e.msg="invalid distance code",r.mode=16209;break}r.offset=b,r.extra=15&g,r.mode=16203;case 16203:if(r.extra){for(A=r.extra;h<A;){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}r.offset+=d&(1<<r.extra)-1,d>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=16209;break}r.mode=16204;case 16204:if(0===o)break t;if(u=f-o,r.offset>u){if((u=r.offset-u)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=16209;break}u>r.wnext?(u-=r.wnext,p=r.wsize-u):p=r.wnext-u,u>r.length&&(u=r.length),w=r.window}else w=a,p=i-r.offset,u=r.length;u>o&&(u=o),o-=u,r.length-=u;do a[i++]=w[p++];while(--u);0===r.length&&(r.mode=16200);break;case 16205:if(0===o)break t;a[i++]=r.length,o--,r.mode=16200;break;case 16206:if(r.wrap){for(;h<32;){if(0===l)break t;l--,d|=n[s++]<<h,h+=8}if(f-=o,e.total_out+=f,r.total+=f,4&r.wrap&&f&&(e.adler=r.check=r.flags?e_(r.check,a,f,i-f):ef(r.check,a,f,i-f)),f=o,4&r.wrap&&(r.flags?d:tW(d))!==r.check){e.msg="incorrect data check",r.mode=16209;break}d=0,h=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;h<32;){if(0===l)break t;l--,d+=n[s++]<<h,h+=8}if(4&r.wrap&&d!==(0|r.total)){e.msg="incorrect length check",r.mode=16209;break}d=0,h=0}r.mode=16208;case 16208:E=tM;break t;case 16209:E=tC;break t;case 16210:return tH;default:return tO}return e.next_out=i,e.avail_out=o,e.next_in=s,e.avail_in=l,r.hold=d,r.bits=h,(r.wsize||f!==e.avail_out&&r.mode<16209&&(r.mode<16206||t!==tL))&&tV(e,e.output,e.next_out,f-e.avail_out),c-=e.avail_in,f-=e.avail_out,e.total_in+=c,e.total_out+=f,r.total+=f,4&r.wrap&&f&&(e.adler=r.check=r.flags?e_(r.check,a,f,e.next_out-f):ef(r.check,a,f,e.next_out-f)),e.data_type=r.bits+64*!!r.last+128*(16191===r.mode)+256*(16199===r.mode||16194===r.mode),(0===c&&0===f||t===tL)&&E===tT&&(E=t$),E},inflateEnd:e=>{if(tN(e))return tO;let t=e.state;return t.window&&(t.window=null),e.state=null,tT},inflateGetHeader:(e,t)=>{if(tN(e))return tO;let r=e.state;return(2&r.wrap)==0?tO:(r.head=t,t.done=!1,tT)},inflateSetDictionary:(e,t)=>{let r,n,a=t.length;return tN(e)||0!==(r=e.state).wrap&&16190!==r.mode?tO:16190===r.mode&&ef(1,t,a,0)!==r.check?tC:tV(e,t,a,a)?(r.mode=16210,tH):(r.havedict=1,tT)}},tq=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};let tX=Object.prototype.toString,{Z_NO_FLUSH:tK,Z_FINISH:tY,Z_OK:tJ,Z_STREAM_END:tQ,Z_NEED_DICT:t0,Z_STREAM_ERROR:t1,Z_DATA_ERROR:t2,Z_MEM_ERROR:t5}=ew;function t6(e){this.options=tn.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new to,this.strm.avail_out=0;let r=tF.inflateInit2(this.strm,t.windowBits);if(r!==tJ||(this.header=new tq,tF.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=tl.string2buf(t.dictionary):"[object ArrayBuffer]"===tX.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw)&&(r=tF.inflateSetDictionary(this.strm,t.dictionary))!==tJ))throw Error(ep[r])}function t3(e,t){let r=new t6(t);if(r.push(e),r.err)throw r.msg||ep[r.err];return r.result}t6.prototype.push=function(e,t){let r,n,a,s=this.strm,i=this.options.chunkSize,l=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?tY:tK,"[object ArrayBuffer]"===tX.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;;){for(0===s.avail_out&&(s.output=new Uint8Array(i),s.next_out=0,s.avail_out=i),(r=tF.inflate(s,n))===t0&&l&&((r=tF.inflateSetDictionary(s,l))===tJ?r=tF.inflate(s,n):r===t2&&(r=t0));s.avail_in>0&&r===tQ&&s.state.wrap>0&&0!==e[s.next_in];)tF.inflateReset(s),r=tF.inflate(s,n);switch(r){case t1:case t2:case t0:case t5:return this.onEnd(r),this.ended=!0,!1}if(a=s.avail_out,s.next_out&&(0===s.avail_out||r===tQ))if("string"===this.options.to){let e=tl.utf8border(s.output,s.next_out),t=s.next_out-e,r=tl.buf2string(s.output,e);s.next_out=t,s.avail_out=i-t,t&&s.output.set(s.output.subarray(e,e+t),0),this.onData(r)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(r!==tJ||0!==a){if(r===tQ)return r=tF.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===s.avail_in)break}}return!0},t6.prototype.onData=function(e){this.chunks.push(e)},t6.prototype.onEnd=function(e){e===tJ&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=tn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};let{Deflate:t8,deflate:t4,deflateRaw:t9,gzip:t7}={Deflate:tb,deflate:ty,deflateRaw:function(e,t){return(t=t||{}).raw=!0,ty(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,ty(e,t)},constants:ew},{Inflate:re,inflate:rt,inflateRaw:rr,ungzip:rn}={Inflate:t6,inflate:t3,inflateRaw:function(e,t){return(t=t||{}).raw=!0,t3(e,t)},ungzip:t3,constants:ew},ra=new class{constructor(e){this.worker=new E(e)}createWebSocket(e,t=[],r,n){try{e=new URL(e)}catch(t){throw new DOMException(`Faiiled to construct 'WebSocket': The URL '${e}' is invalid.`)}if(!A.includes(e.protocol))throw new DOMException(`Failed to construct 'WebSocket': The URL's scheme must be either 'ws' or 'wss'. '${e.protocol}' is not allowed.`);for(let e of(Array.isArray(t)||(t=[t]),t=t.map(String)))if(!function(e){for(let t=0;t<e.length;t++){let r=e[t];if(!"!#$%&'*+-.0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ^_`abcdefghijklmnopqrstuvwxyz|~".includes(r))return!1}return!0}(e))throw new DOMException(`Failed to construct 'WebSocket': The subprotocol '${e}' is invalid.`);return n=n||{},new S(e,t,this.worker,n)}async fetch(e,t){let r=new Request(e,t),n=t?.headers||r.headers,a=n instanceof Headers?Object.fromEntries(n):n,s=r.body,i=new URL(r.url);if(i.protocol.startsWith("blob:")){let e=await p(i),t=new Response(e.body,e);return t.rawHeaders=Object.fromEntries(e.headers),t}for(let e=0;;e++){let n=(await this.worker.sendMessage({type:"fetch",fetch:{remote:i.toString(),method:r.method,headers:a,body:s||void 0}},s?[s]:[])).fetch,l=new Response(L.includes(n.status)?void 0:n.body,{headers:new Headers(n.headers),status:n.status,statusText:n.statusText});l.rawHeaders=n.headers,l.rawResponse=n,l.finalURL=i.toString();let o=t?.redirect||r.redirect;if(!z.includes(l.status))return l;switch(o){case"follow":{let t=l.headers.get("location");if(20>e&&null!==t){i=new URL(t,i);continue}throw TypeError("Failed to fetch")}case"error":throw TypeError("Failed to fetch");case"manual":return l}}}},rs=new TextDecoder,ri=new Uint8Array([0,0,255,255]);globalThis.WebSocket=new Proxy(globalThis.WebSocket,{construct(e,t){let[r,n]=t,a=ra.createWebSocket(r,n,null,{"User-Agent":self.navigator.userAgent,origin:self.scope$location.origin});class s extends EventTarget{binaryType="blob";bufferedAmount=0;extensions="";onclose=null;onerror=null;onmessage=null;onopen=null;protocol="";readyState=0;url=r;#e=a;constructor(){super(),a.addEventListener("open",e=>{this.readyState=1,this.#t("open",e)}),a.addEventListener("close",e=>{this.readyState=3,this.#t("close",e)}),a.addEventListener("error",e=>{this.#t("error",e)}),a.addEventListener("message",e=>{let t=e.data;if("string"==typeof t)return void this.#t("message",new MessageEvent("message",{data:t}));let r=t instanceof ArrayBuffer?t:t.arrayBuffer?.();if(!r)return void this.#t("message",new MessageEvent("message",{data:t}));Promise.resolve(r).then(e=>{let r=new Uint8Array(e);if(r.length>=4&&r.slice(-4).every((e,t)=>e===ri[t]))try{let e=r.slice(0,-4),t=rr(e),n=rs.decode(t);this.#t("message",new MessageEvent("message",{data:n}));return}catch{}try{let e=rs.decode(r);if(e.startsWith("{")||e.startsWith("["))return void this.#t("message",new MessageEvent("message",{data:e}))}catch{}this.#t("message",new MessageEvent("message",{data:t}))})})}send(e){this.#e.send(e)}close(e,t){this.#e.close(e,t)}#t(e,t){let r;r=t instanceof MessageEvent?new MessageEvent(e,{data:t.data}):t instanceof CloseEvent?new CloseEvent(e,{code:t.code,reason:t.reason,wasClean:t.wasClean}):t instanceof ErrorEvent?new ErrorEvent(e,{message:t.message,error:t.error}):new Event(e);let n=this["on"+e];"function"==typeof n&&n.call(this,r),this.dispatchEvent(r)}}return new s}})})()})();
//# sourceMappingURL=en.client.js.map